#!/bin/bash

# PUSH FILES, DIRECTORIES, OR RECURSIVE ALL TO LIVE SERVER
scriptName="$(basename $0)"
# EX 1: $scriptName index.html
# EX 2: $scriptName scripts/main.js scripts
# EX 3: $scriptName css
# EX 3: $scriptName all

baseDir='/example/local/path'
remeoteDir='/example/remote/path'

bold=$(tput bold)
normal=$(tput sgr0)

# CLEAR PREVIOUS CONSOLE OUTPUT
printf "\033c"

# HEADER INFO
echo "-- $scriptName --"

# HELP INFO
if [[ $1 == "--help" ]];
then
  echo ""
  echo "valid cmd examples:"
  echo "$ ${bold}$scriptName index.html${normal}   will push -f arg to main -d"
  echo "$ ${bold}$scriptName css${normal}   will push -r -d arg to -d arg"
  echo "$ ${bold}$scriptName css/main.css css${normal}   [will push -f arg to -d arg"
  echo "$ ${bold}$scriptName --files${normal}   will push /* to main -d"
  echo "$ ${bold}$scriptName --all${normal}   will push /* -r to main -d"

# PUSH ALL
elif [[ $1 == "--all" ]];
then
  sudo cp $ulDir/* -r $servDir/
  echo "Pushing ${bold}$ulDir/* -r${normal} to ${bold}$servDir/${normal}"

# PUSH FILES IN MAIN DIR
elif [[ $1 == "--files" ]];
then
  sudo cp $ulDir/* $servDir/
  echo "Pushing ${bold}$ulDir/*${normal} to ${bold}$servDir/${normal}";

# $1 FILE ARGUMENT, EX: $scriptName scripts/main.js [...]
elif [[ -f $ulDir/$1 ]];
then

  # $2 NO SERVER DIR ARG, EX: $scriptName scripts/main.js
  if [[ -z $2 ]];
  then
    read -p "Push ${bold}$ulDir/$1${normal} to ${bold}$servDir/${normal}? ${bold}y/n${normal}: " -n 1 -r
    echo
    if [[ $REPLY =~ ^[Yy]$ ]]
    then
      sudo cp $ulDir/$1 $servDir/
      echo "Success! ${bold}$1${normal} has been updated."
    fi

  # $2 SERVER DIR ARG, EX: $scriptName scripts/main.js scripts
  elif [[ -d $ulDir/$2 ]];
  then
    sudo cp $ulDir/$1 $servDir/$2/
    echo "Pushing ${bold}$ulDir/$1${normal} to ${bold}$servDir/$2/${normal}"

  fi

# $1 DIR ARGUMENT, EX: scripts
elif [[ -d $ulDir/$1 && -z $2 ]];
then
  read -p "Push ${bold}$ulDir/$1${normal} to ${bold}$servDir/${normal}? ${bold}y/n${normal}: " -n 1 -r
  echo
  if [[ $REPLY =~ ^[Yy]$ ]]
  then
    sudo cp $ulDir/$1/* -r $servDir/$1/
    echo "Success! ${bold}$1/${normal} has been updated."
  fi

# ERROR, NO ARGUMENT
else
  echo "no argument"
fi

echo ""

